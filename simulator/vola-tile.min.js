(function(l){var g={},k=[[66,389,3,452],[194,324,131,261],[1,5,0,4],[1,4,0,5],[258,256,387,449],[386,449,259,256]];g.cube=function(d){this.tiles=[];this.size=d;var b,e;for(b=0;6>b;++b)for(this.tiles[b]=[],e=0;e<d*d;++e)this.tiles[b][e]=b};g.cube.prototype={hash:function(){var d=this.size,b=0,e,c,a=12138+(d+18906416*this.tiles[0][0])*(d+51966),a=(a>>3)+this.tiles[3][d*d>>1]+this.tiles[4][1],b=a<<1;for(e=5;0<=e;--e)for(c=0;c<d*d;++c)a=(a^17960977*this.tiles[e][c])>>1,b+=a*(e+c+637613);return b&2147483647},
turn:function(d,b,e){d&1?(d^=1,b=this.size-b-1,e^=1):e&=1;b=b||0;var c,a,f,h,g=[];for(c=0;4>c;++c)for(g[c]=[],f=k[d+e][c],h=f&64?this.size-b-1:b,a=0;a<this.size;++a)g[c][f&128?this.size-a-1:a]=this.tiles[f&7][f&256?a*this.size+h:h*this.size+a];for(c=0;4>c;++c)for(f=k[d+e][c],h=f&64?this.size-b-1:b,a=0;a<this.size;++a)this.tiles[f&7][f&256?a*this.size+h:h*this.size+a]=g[(c+3)%4][a];if(0===b||(e^=1,d^=1,b===this.size-1)){b=[];for(c=0;c<this.size;++c)for(a=0;a<this.size;++a)b[e?c+this.size*(this.size-
a-1):a*this.size+(this.size-c-1)]=this.tiles[d][c*this.size+a];this.tiles[d]=b}}};l.vtile=g})(window);
